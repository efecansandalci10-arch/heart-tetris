<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>❤️ŞEVVAL❤️</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:#0f0f0f;
  height:100dvh;
  width:100vw;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial, sans-serif;
}
canvas{
  display:block;
}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ---------------- MODLAR ---------------- */
let mode = "hearts"; // direkt kalplerle başlayalım
let hearts = [];

/* ---------------- KALP ARKAPLAN ---------------- */
let heartCount = 0;
const maxHearts = 200; // kaç kalp düşecek
function spawnBackgroundHeart(){
  if(heartCount >= maxHearts) return;
  const x = Math.random() * canvas.width;
  const y = -30;
  const speed = 1 + Math.random() * 2;
  const size = 12 + Math.random() * 10;
  hearts.push({x, y, speed, size});
  heartCount++;
}

function updateHearts(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  spawnBackgroundHeart();
  hearts.forEach(h=>{
    h.y += h.speed;
    drawHeart(h.x, h.y, h.size);
  });
}

/* ---------------- ÇİZME ---------------- */
function drawHeart(x,y,size){
  ctx.font = size + "px Arial";
  ctx.textAlign = "center";
  ctx.shadowColor = "#ff2e88";
  ctx.shadowBlur = 12;
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText("❤️", x, y);
}

/* ---------------- MESAJ ---------------- */
let message = "Seni her şeyden çok seviyorum, beni sevdiğin için çok şanslıyım bazen imbécile olsam da benden bıkmadığın için de çok şanslıyım seni mutlu etmek ve beraber mutlu olmak için elimden gelenin fazlasını yapacağım. Birlikte nice sevgililer günlerine :)";
let displayed = "";
let charIndex = 0;
let messageSpeed = 3; // frame başına karakter
let frameCount = 0;
let messageStarted = false;

function updateMessage(){
  frameCount++;
  if(charIndex < message.length && frameCount % messageSpeed === 0){
    displayed += message[charIndex];
    charIndex++;
  }
  let fontSize = Math.min(canvas.width/15, 60);
  ctx.font = "bold "+fontSize+"px Arial";
  ctx.textAlign = "center";
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText(displayed, canvas.width/2, canvas.height/2);
}

/* ---------------- LOOP ---------------- */
function loop(){
  if(mode === "hearts"){
    updateHearts();
    // bütün kalpler ekrana gelince mesaj başlasın
    if(heartCount >= maxHearts && !messageStarted){
      messageStarted = true;
      setTimeout(()=>{mode="message";}, 1000);
    }
  } else if(mode === "message"){
    updateHearts(); // kalpler arkada düşmeye devam etsin
    updateMessage();
  }
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
