<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>‚ù§Ô∏è≈ûEVVAL‚ù§Ô∏è</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:#0f0f0f;
  height:100dvh;
  width:100vw;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial, sans-serif;
}
canvas{
  display:block;
}
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ---------------- MOD ---------------- */
let mode = "intro";

/* ---------------- INTRO ---------------- */
let y = -100;
let velocity = 2;
let gravity = 0.4;
let bounce = 0.7;
let introFinished = false;

function drawIntro(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  let fontSize = Math.min(canvas.width/5,100);
  ctx.font = "bold "+fontSize+"px Arial";
  ctx.textAlign = "center";
  ctx.shadowColor = "#ff2e88";
  ctx.shadowBlur = 20;
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText("‚ù§Ô∏è≈ûEVVAL‚ù§Ô∏è",canvas.width/2,y);
}

function updateIntro(){
  velocity += gravity;
  y += velocity;
  let fontSize = Math.min(canvas.width/5,100);
  if(y > canvas.height-fontSize){
    y = canvas.height-fontSize;
    velocity *= -bounce;
    if(Math.abs(velocity) < 1.5 && !introFinished){
      introFinished = true;
      setTimeout(()=>{mode="hearts";},500);
    }
  }
  drawIntro();
}

/* ---------------- KALPLER ---------------- */
let hearts = [];
const maxHearts = 25;

function spawnHeart(){
  if(hearts.length >= maxHearts) return;
  hearts.push({
    x: Math.random() * canvas.width,
    y: -30,
    speed: 0.5 + Math.random() * 1.2,
    size: 12 + Math.random() * 10
  });
}

function updateHearts(){
  spawnHeart();
  hearts.forEach(h=>{
    h.y += h.speed;
    drawHeart(h.x, h.y, h.size);
  });
}

function drawHeart(x,y,size){
  ctx.font = size + "px Arial";
  ctx.textAlign = "center";
  ctx.shadowColor = "#ff2e88";
  ctx.shadowBlur = 6;
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText("‚ù§Ô∏è", x, y);
}

/* ---------------- SAKURA √áƒ∞√áEKLERƒ∞ ---------------- */
let flowers = [];
const maxFlowers = 30;

function spawnFlower(){
  if(flowers.length >= maxFlowers) return;

  flowers.push({
    x: Math.random() * canvas.width,
    y: -30,
    speed: 0.7 + Math.random() * 1.2,
    size: 18 + Math.random() * 12,
    sway: Math.random() * 2 + 1,
    angle: Math.random() * Math.PI * 2,
    emoji: ["üå∏","üå∫","üå∑"][Math.floor(Math.random()*3)]
  });
}

function updateFlowers(){
  spawnFlower();
  flowers.forEach(f=>{
    f.y += f.speed;
    f.angle += 0.02;
    f.x += Math.sin(f.angle) * f.sway; // saƒüa sola salƒ±nƒ±m
    drawFlower(f.x, f.y, f.size, f.emoji);
  });
}

function drawFlower(x,y,size,emoji){
  ctx.font = size + "px Arial";
  ctx.textAlign = "center";
  ctx.shadowColor = "#ff69b4";
  ctx.shadowBlur = 10;
  ctx.fillText(emoji, x, y);
}

/* ---------------- MESAJ ---------------- */
let message = "Seni her ≈üeyden √ßok seviyorum ‚ù§Ô∏è";
let displayed = "";
let charIndex = 0;
let messageSpeed = 3;
let frameCount = 0;
let messageStarted = false;

function updateMessage(){
  frameCount++;
  if(charIndex < message.length && frameCount % messageSpeed === 0){
    displayed += message[charIndex];
    charIndex++;
  }
  let fontSize = Math.min(canvas.width/15, 60);
  ctx.font = "bold "+fontSize+"px Arial";
  ctx.textAlign = "center";
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText(displayed, canvas.width/2, canvas.height/2);
}

function drawEndMessage(){
  let fontSize = Math.min(canvas.width/20, 50);
  ctx.font = "bold "+fontSize+"px Arial";
  ctx.textAlign = "center";
  ctx.fillStyle = "#ff4e8a";
  ctx.shadowColor = "#ff2e88";
  ctx.shadowBlur = 10;
  ctx.fillText("Minnakƒ±n üíñ", canvas.width/2, canvas.height - 80);
}

/* ---------------- LOOP ---------------- */
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(mode==="intro"){
    updateIntro();
  } 
  else if(mode==="hearts"){
    updateHearts();
    updateFlowers();
    if(hearts.length >= maxHearts && !messageStarted){
      messageStarted = true;
      setTimeout(()=>{mode="message";},1000);
    }
  }
  else if(mode==="message"){
    updateHearts();
    updateFlowers();
    updateMessage();
    drawEndMessage();
  }

  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
