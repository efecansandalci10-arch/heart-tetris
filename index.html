<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>SEVVAL ❤️</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
background:#0f0f0f;
height:100dvh;
width:100vw;
overflow:hidden;
display:flex;
justify-content:center;
align-items:center;
padding-bottom:env(safe-area-inset-bottom);
padding-top:env(safe-area-inset-top);
font-family:Arial, sans-serif;
}

canvas{
display:block;
touch-action:none;
}
</style>
</head>

<body>
<canvas id="canvas"></canvas>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

function resize(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

/* ---------------- INTRO ---------------- */

let mode="intro";
let y=-100;
let velocity=2;
let gravity=0.4;
let bounce=0.7;
let introFinished=false;

function drawIntro(){
ctx.clearRect(0,0,canvas.width,canvas.height);

let fontSize=Math.min(canvas.width/5,100);
ctx.font="bold "+fontSize+"px Arial";
ctx.textAlign="center";
ctx.shadowColor="#ff2e88";
ctx.shadowBlur=30;
ctx.fillStyle="#ff4e8a";
ctx.fillText("SEVVAL ❤️",canvas.width/2,y);
}

function updateIntro(){
velocity+=gravity;
y+=velocity;

let fontSize=Math.min(canvas.width/5,100);

if(y>canvas.height-fontSize){
y=canvas.height-fontSize;
velocity*=-bounce;

if(Math.abs(velocity)<1.5 && !introFinished){
introFinished=true;
setTimeout(()=>{
mode="hearts";
initHearts();
},1200);
}
}

drawIntro();
requestAnimationFrame(loop);
}

/* ---------------- HEART TEXT MODE ---------------- */

let hearts=[];
let targets=[];
let gridSize;
let lastDrop=0;
let dropInterval=80;

function initHearts(){

gridSize=Math.max(12, Math.floor(canvas.width/45));

createTextShape("Je t'aime ma chérie");
}

function createTextShape(text){

let offCanvas=document.createElement("canvas");
let offCtx=offCanvas.getContext("2d");

offCanvas.width=canvas.width;
offCanvas.height=canvas.height;

let fontSize=Math.min(canvas.width/10,80);

offCtx.fillStyle="white";
offCtx.textAlign="center";
offCtx.font="bold "+fontSize+"px Arial";
offCtx.fillText(text,offCanvas.width/2,offCanvas.height/2);

let imageData=offCtx.getImageData(0,0,offCanvas.width,offCanvas.height).data;

for(let y=0;y<offCanvas.height;y+=gridSize){
for(let x=0;x<offCanvas.width;x+=gridSize){

let index=(y*offCanvas.width+x)*4;

if(imageData[index+3]>128){
targets.push({
x:x,
y:y
});
}
}
}
}

function spawnHeart(){
if(targets.length===0) return;

let t=targets.shift();

hearts.push({
x:t.x,
y:-20,
targetY:t.y,
speed:4
});
}

function updateHearts(timestamp){

ctx.clearRect(0,0,canvas.width,canvas.height);

if(timestamp-lastDrop>dropInterval){
spawnHeart();
lastDrop=timestamp;
}

hearts.forEach(h=>{
if(h.y<h.targetY){
h.y+=h.speed;
}
drawHeart(h.x,h.y);
});

requestAnimationFrame(loop);
}

function drawHeart(x,y){
ctx.font=gridSize+"px Arial";
ctx.textAlign="center";
ctx.shadowColor="#ff2e88";
ctx.shadowBlur=15;
ctx.fillStyle="#ff4e8a";
ctx.fillText("❤️",x,y);
}

/* ---------------- LOOP ---------------- */

function loop(timestamp){
if(mode==="intro"){
updateIntro();
}else{
updateHearts(timestamp||0);
}
}

loop();
</script>
</body>
</html>
