<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>❤️ŞEVVAL❤️</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:#0f0f0f;
  height:100dvh;
  width:100vw;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial, sans-serif;
}
canvas{
  display:block;
}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ---------------- MODLAR ---------------- */
let mode = "intro";

/* ---------------- INTRO ANIMASYONU ---------------- */
let y = -100;
let velocity = 2;
let gravity = 0.4;
let bounce = 0.7;
let introFinished = false;

function drawIntro(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  let fontSize = Math.min(canvas.width/5,100);
  ctx.font = "bold "+fontSize+"px Arial";
  ctx.textAlign = "center";
  ctx.shadowColor = "#ff2e88";
  ctx.shadowBlur = 30;
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText("❤️ŞEVVAL❤️",canvas.width/2,y);
}

function updateIntro(){
  velocity += gravity;
  y += velocity;
  let fontSize = Math.min(canvas.width/5,100);
  if(y > canvas.height-fontSize){
    y = canvas.height-fontSize;
    velocity *= -bounce;
    if(Math.abs(velocity) < 1.5 && !introFinished){
      introFinished = true;
      setTimeout(()=>{
        mode="hearts"; // kalp animasyonuna geç
      },500);
    }
  }
  drawIntro();
}

/* ---------------- KALP ARKAPLAN ---------------- */
let hearts = [];
let heartCount = 0;
const maxHearts = 61;

function spawnBackgroundHeart(){
  if(heartCount >= maxHearts) return;
  const x = Math.random() * canvas.width;
  const y = -30;
  const speed = 1 + Math.random() * 2;
  const size = 12 + Math.random() * 10;
  hearts.push({x, y, speed, size});
  heartCount++;
}

function updateHearts(){
  spawnBackgroundHeart();
  hearts.forEach(h=>{
    h.y += h.speed;
    drawHeart(h.x, h.y, h.size);
  });
}

function drawHeart(x,y,size){
  ctx.font = size + "px Arial";
  ctx.textAlign = "center";
  ctx.shadowColor = "#ff2e88";
  ctx.shadowBlur = 12;
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText("❤️", x, y);
}

/* ---------------- MESAJ ---------------- */
let message = "Seni her şeyden çok seviyorum ❤️";
let displayed = "";
let charIndex = 0;
let messageSpeed = 3;
let frameCount = 0;
let messageStarted = false;

function updateMessage(){
  frameCount++;
  if(charIndex < message.length && frameCount % messageSpeed === 0){
    displayed += message[charIndex];
    charIndex++;
  }
  let fontSize = Math.min(canvas.width/15, 60);
  ctx.font = "bold "+fontSize+"px Arial";
  ctx.textAlign = "center";
  ctx.fillStyle = "#ff4e8a";
  ctx.fillText(displayed, canvas.width/2, canvas.height/2);
}

/* ---------------- LOOP ---------------- */
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(mode==="intro"){
    updateIntro();
  } 
  else if(mode==="hearts"){
    updateHearts();
    if(heartCount >= maxHearts && !messageStarted){
      messageStarted = true;
      setTimeout(()=>{mode="message";},1000);
    }
  }
  else if(mode==="message"){
    updateHearts(); // kalpler arka planda düşmeye devam etsin
    updateMessage();
  }

  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
